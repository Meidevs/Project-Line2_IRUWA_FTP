<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link href="https://mostfeel.site:8888/static/stylesheets/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Favicon -->
  <!-- Favicon and Touch Icons -->
  <link href="https://mostfeel.site:8888/static/images/web_images/favicon.png" rel="shortcut icon" type="image/png">
  <link href="https://mostfeel.site:8888/static/images/web_images/apple-touch-icon.png" rel="apple-touch-icon">
  <link href="https://mostfeel.site:8888/static/images/web_images/apple-touch-icon-72x72.png" rel="apple-touch-icon"
    sizes="72x72">
  <link href="https://mostfeel.site:8888/static/images/web_images/apple-touch-icon-114x114.png" rel="apple-touch-icon"
    sizes="114x114">
  <link href="https://mostfeel.site:8888/static/images/web_images/apple-touch-icon-144x144.png" rel="apple-touch-icon"
    sizes="144x144">
  <script src="https://mostfeel.site:8888/static/javascripts/js/jquery.min.js" type="text/javascript"></script>
  <title>Classifly - Classified Ads HTML Template</title>

</head>

<body>

  <!-- =======================
	header Start-->
  <header class="header-static navbar-sticky navbar-light shadow">
    <!-- Navbar top start-->
    <div class="navbar-top d-none d-lg-block">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center">
          </div>

          <div class="d-flex align-items-center">
            <div class="dropdown"> <a class="dropdown-toggle" href="#" role="button" id="dropdownAccount"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i
                  class="far fa-user mr-2"></i>Account </a>
              <div class="dropdown-menu mt-2 shadow" aria-labelledby="dropdownAccount"><a class="dropdown-item"
                  href="#">Logout</a></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Navbar top End-->

    <!-- Logo Nav Start -->
    <nav class="navbar navbar-expand-lg">
      <div class="container">
        <!-- Logo -->
        <a class="navbar-brand" href="https://mostfeel.site:8888/admin/main"> <img
            src="https://mostfeel.site:8888/static/images/web_images/logo.png" style="width: 60px; height: 60px;"
            alt="iruwa"> <strong>IRUWA</strong> </a>
        <!-- Menu opener button -->
        <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarCollapse"
          aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"> <span
            class="navbar-toggler-icon"> </span> </button>
        <!-- Main Menu Start -->
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav ml-auto">
            <!-- Menu item 1 Demos-->
            <li class="nav-item">
              <a class="nav-link" href="https://mostfeel.site:8888/admin/main">홈</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://mostfeel.site:8888/admin/list">업체 목록</a>
            </li>
            <li class="nav-item active dropdown"> <a class="nav-link dropdown-toggle" href="#" id="docMenu"
                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">대쉬보드</a>
              <ul class="dropdown-menu" aria-labelledby="docMenu">
                <li><a class="dropdown-item" href="https://mostfeel.site:8888/admin/category">카테고리 관리</a></li>
                <li><a class="dropdown-item" href="https://mostfeel.site:8888/admin/service">서비스 관리</a></li>
                <li><a class="dropdown-item" href="https://mostfeel.site:8888/admin/images">이미지 관리</a></li>
              </ul>
            </li>
          </ul>
        </div>
        <!-- Main Menu End -->
      </div>
    </nav>
    <!-- Logo Nav End -->
  </header>
  <!-- =======================
	header End-->

  <!-- =======================
	Banner innerpage -->
  <div class="innerpage-banner left bg-overlay-dark-7 py-7"
    style="background:url(https://mostfeel.site:8888/static/images/web_images/07.jpg) repeat; background-size:cover;">
    <div class="container">
      <div class="row all-text-white">
        <div class="col-md-12 align-self-center">
          <h1 class="innerpage-title">이미지 관리</h1>
          <h6 class="subtitle">전체 이미지를 관리하는 페이지입니다.</h6>
        </div>
      </div>
    </div>
  </div>
  <!-- =======================
	Banner innerpage -->

  <!-- =======================
	Portfolio -->
  <section class="portfolio pt80 pb80">
    <div class="container">
      <div class="row">
        <div class="col-md-12 p-0">
          <div class="nav justify-content-center">
            <ul class="nav-tabs nav-tabs-style-2 text-center px-2 p-md-0 m-0 mb-4" id="data-filter-list">
              <li class="nav-filter active" data-filter="*">전체</li>
            </ul>
          </div>
          <div id="image-list">

          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- =======================
	Portfolio -->

  <footer class="main-footer">
    <div class="footer-content">
      <div class="container">
        <div class="row">
          <div class=" col-xl-3 col-xl-3 col-md-3 col-sm-6 col-xs-12 col-12">
            <div class="footer-col row">
              <div class="col-sm-12 col-xs-6 col-xxs-12 no-padding-lg">
                <div class="mobile-app-content">
                  <h4 class="footer-title">Mobile Apps</h4>
                  <div class="row ">
                    <div class="col-6  "> <a class="app-icon" target="_blank" href="https://itunes.apple.com/"> <img
                          src="https://mostfeel.site:8888/static/images/web_images/app_store_badge.svg" alt="Available on the App Store"> </a> </div>
                    <div class="col-6  "> <a class="app-icon" target="_blank" href="https://play.google.com/store/apps/details?id=com.Line2.iruwaapp">
                        <img src="https://mostfeel.site:8888/static/images/web_images/google-play-badge.svg" alt="Available on the App Store"> </a> </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div style="clear: both"></div>
          <div class="col-xl-12">
            <div class=" text-center paymanet-method-logo">
              <div class="copy-info text-center"> © 2019 Classifly. All Rights Reserved. </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script>
    getAllCategories();
    getAllImages();
    // reload_js();
    async function getAllCategories() {
      console.log('getAllCategories')
      try {
        const resCategories = await fetch('https://mostfeel.site:8888/admin/category/list', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        });
        let json = await resCategories.json();
        if (resCategories.ok) {
          var data_filter_list = document.getElementById('data-filter-list');
          for (var i = 0; i < json.length; i++) {
            var newLi = document.createElement('li');
            var textNode = document.createTextNode(json[i].category_name);
            newLi.setAttribute("class", "nav-filter");
            newLi.setAttribute("data-filter", ".a_" + json[i].category_seq);
            newLi.appendChild(textNode);
            data_filter_list.append(newLi)
          }
          return true;
        }
      } catch (err) {
        console.log(err);
        alert('카테고리를 불러오는데 실패하였습니다.');
      }
    }
    async function getAllImages() {
      console.log('getAllImages')
      try {
        let response = await fetch('https://mostfeel.site:8888/admin/itemimages', {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
          }
        });

        let json = await response.json();
        if (response.ok) {
          var items_padding = document.getElementById('image-list');
          var parentDiv = document.createElement('div');
          parentDiv.setAttribute("class", "portfolio-wrap grid items-4 items-padding");
          items_padding.appendChild(parentDiv);
          for (var i = 0; i < json.length; i++) {
            var newDiv = document.createElement('div');
            newDiv.setAttribute("class", `portfolio-card isotope-item a_` + json[i].category_seq);
            var data = `<div class="portfolio-card-body">
              <div class="portfolio-card-header"> <img
                  src="`+ json[i].uri + `" alt="" width="100%" height="auto"> </div>
              <div class="portfolio-card-footer"> <a class="full-screen"
                  href="`+ json[i].uri + `" 
                  data-fancybox="portfolio" data-caption="aperiam sorem"><i class="fas fa-compress"></i></a>
                <h6 class="info-title">`+ json[i].item_name +`</h6>
                <p>` + json[i].cmp_name +`</p>
              </div>
            </div>`
            newDiv.innerHTML = data;
            parentDiv.appendChild(newDiv);
          }
          return true;
        }
      } catch (err) {
        console.log(err);
      }
    }
    $(document).ready(() => {
      portfolioIsotope();
      reload_js();
    })
    function portfolioIsotope() {
      if ($().isotope) {
        var $container = $('.portfolio-wrap');
          $container.isotope({
            itemSelector: '.isotope-item',
            transitionDuration: '0.5s',
        });
        $('.nav-tabs .nav-filter').on('click', function () {
          var selector = $(this).attr('data-filter');
          $('.nav-tabs .nav-filter').removeClass('active');
          $(this).addClass('active');
          $container.isotope({ filter: selector });
          return false;
        });
      }
    };
    function reload_js() {
      $('link[href="https://mostfeel.site:8888/static/stylesheets/css/style.css"]').remove();
      $('<link>').attr('href', "https://mostfeel.site:8888/static/stylesheets/css/style.css").attr("type","text/css").attr("rel", "stylesheet").appendTo('head');
      $('script[src="https://mostfeel.site:8888/static/javascripts/js/isotope.pkgd.min.js"]').remove();
      $('<script>').attr('src', "https://mostfeel.site:8888/static/javascripts/js/isotope.pkgd.min.js").appendTo('head');
    }
  </script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/popper.min.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/bootstrap.min.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/isotope.pkgd.min.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/imagesloaded.pkgd.min.js"
    type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/functions.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/owl.carousel.min.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/slick.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/swiper.min.js" type="text/javascript"></script>
  <script src="https://mostfeel.site:8888/static/javascripts/js/main.js" type="text/javascript"></script>
</body>

</html>